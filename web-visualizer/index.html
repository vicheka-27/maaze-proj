<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maze Solver Visualizer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #f5f5f5;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 {
            margin-bottom: 20px;
            color: #333;
        }

        .controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 10px 20px;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            border: 2px solid #333;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        button:hover {
            background: #333;
            color: white;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        select {
            padding: 10px;
            font-size: 14px;
            font-family: 'Courier New', monospace;
            border: 2px solid #333;
        }

        .maze-container {
            background: white;
            padding: 20px;
            border: 3px solid #333;
            display: inline-block;
        }

        .maze {
            display: grid;
            gap: 1px;
            background: #ddd;
            border: 1px solid #333;
        }

        .cell {
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            transition: background-color 0.1s;
        }

        .wall {
            background: #000;
        }

        .open {
            background: #fff;
        }

        .start {
            background: #4CAF50;
            color: white;
        }

        .end {
            background: #f44336;
            color: white;
        }

        .visiting {
            background: #2196F3;
        }

        .visited {
            background: #BBDEFB;
        }

        .path {
            background: #FFC107;
        }

        .backtrack {
            background: #FFE082;
        }

        .stats {
            margin-top: 20px;
            text-align: center;
            font-size: 16px;
        }

        .legend {
            margin-top: 20px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-box {
            width: 25px;
            height: 25px;
            border: 1px solid #333;
        }
    </style>
</head>
<body>
    <h1>Maze Solver Visualizer (DFS with Backtracking)</h1>
    
    <div class="controls">
        <select id="testCase">
            <option value="1">Test 1: Simple (10x10)</option>
            <option value="2">Test 2: Complex (15x15)</option>
            <option value="3">Test 3: Zig-Zag (20x20)</option>
            <option value="4">Test 4: No Path (10x10)</option>
            <option value="5">Test 5: Large (15x15)</option>
        </select>
        <button id="startBtn">Start</button>
        <button id="pauseBtn" disabled>Pause</button>
        <button id="resetBtn">Reset</button>
        <select id="speed">
            <option value="500">Slow</option>
            <option value="10" selected>Normal</option>
        </select>
    </div>

    <div class="maze-container">
        <div id="maze" class="maze"></div>
    </div>

    <div class="stats">
        <div id="status">Select a test case and click Start</div>
        <div id="steps"></div>
        <div id="time"></div>
    </div>

    <script>
        const testCases = {
            1: {
                maze: [
                    [1,0,1,1,1,1,1,1,1,1],
                    [1,0,0,0,0,0,0,0,0,1],
                    [1,1,1,1,1,1,1,1,0,1],
                    [0,0,0,0,0,0,0,1,0,1],
                    [1,1,1,1,1,1,0,1,0,1],
                    [1,0,0,0,0,1,0,1,0,1],
                    [1,0,1,1,0,1,0,1,0,1],
                    [1,0,1,0,0,1,0,1,0,1],
                    [1,1,1,1,1,1,1,1,1,1]
                ],
                src: [0,0],
                dest: [8,9]
            },
            2: {
                maze: [
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
                    [1,0,0,0,1,0,0,0,0,0,1,0,0,0,1],
                    [1,0,1,0,1,0,1,1,1,0,1,0,1,0,1],
                    [1,0,1,0,0,0,0,0,1,0,0,0,1,0,1],
                    [1,0,1,1,1,1,1,0,1,1,1,0,1,0,1],
                    [1,0,0,0,0,0,1,0,0,0,1,0,0,0,1],
                    [1,1,1,1,1,0,1,1,1,0,1,1,1,0,1],
                    [1,0,0,0,1,0,0,0,1,0,0,0,0,0,1],
                    [1,0,1,0,1,1,1,1,1,1,1,1,1,0,1],
                    [1,0,1,0,0,0,0,0,0,0,0,0,1,0,1],
                    [1,0,1,1,1,1,1,1,1,1,1,0,1,1,1],
                    [1,0,0,0,0,0,0,1,0,0,1,0,0,0,1],
                    [1,1,1,1,1,1,1,1,1,0,1,1,1,1,1],
                    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,1,1,1,1,1,1,0,1,1,1,1,1,1,1]
                ],
                src: [0,0],
                dest: [14,14]
            },
            3: {
                maze: [
                    [1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
                    [1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1],
                    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1],
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1],
                    [1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1],
                    [1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1],
                    [1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1],
                    [1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1],
                    [1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],
                    [1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
                    [1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],
                    [1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1],
                    [1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,1],
                    [1,0,1,0,1,0,1,0,1,0,1,1,1,1,1,1,1,1,0,1],
                    [1,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,1,0,1],
                    [1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,1,0,1],
                    [1,0,1,0,1,0,1,0,1,0,1,0,1,0,0,1,0,1,0,1],
                    [1,0,1,0,1,0,1,0,1,0,1,0,1,1,0,1,0,1,0,1],
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
                ],
                src: [0,0],
                dest: [19,19]
            },
            4: {
                maze: [
                    [1,0,1,1,1,1,1,1,1,1],
                    [1,0,0,0,0,0,0,0,0,1],
                    [1,1,1,1,1,1,1,1,0,1],
                    [0,0,0,0,0,0,0,1,0,1],
                    [1,1,1,1,1,1,0,1,0,1],
                    [1,0,0,0,0,1,0,1,0,1],
                    [1,0,1,1,0,1,0,1,0,1],
                    [1,0,1,0,0,1,0,1,0,1],
                    [1,1,1,1,1,1,1,1,0,1],
                    [1,0,0,0,0,0,0,0,0,0]
                ],
                src: [0,0],
                dest: [9,8]
            },
            5: {
                maze: [
                    [1,1,1,0,1,1,1,1,1,0,1,1,1,1,1],
                    [1,0,1,0,1,0,0,0,1,0,1,0,0,0,1],
                    [1,0,1,1,1,1,1,0,1,1,1,1,1,0,1],
                    [0,0,0,0,0,0,1,0,0,0,0,0,1,0,1],
                    [1,1,1,1,1,0,1,1,1,1,1,0,1,0,1],
                    [1,0,0,0,1,0,0,0,0,0,1,0,1,0,1],
                    [1,0,1,1,1,1,1,1,1,0,1,0,1,1,1],
                    [1,0,1,0,0,0,0,0,1,0,1,0,0,0,1],
                    [1,0,1,0,1,1,1,0,1,0,1,1,1,0,1],
                    [1,0,1,0,1,0,1,0,1,0,0,0,1,0,1],
                    [1,1,1,0,1,0,1,0,1,1,1,0,1,0,1],
                    [1,0,0,0,1,0,1,0,0,0,1,0,1,0,1],
                    [1,0,1,1,1,0,1,1,1,0,1,0,1,0,1],
                    [1,0,0,0,0,0,0,0,1,0,1,0,1,0,1],
                    [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
                ],
                src: [0,0],
                dest: [14,14]
            }
        };

        let currentMaze = null;
        let animationQueue = [];
        let isRunning = false;
        let isPaused = false;
        let animationSpeed = 10;
        let stepCount = 0;
        let startTime = 0;

        const mazeDiv = document.getElementById('maze');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const testCaseSelect = document.getElementById('testCase');
        const speedSelect = document.getElementById('speed');
        const statusDiv = document.getElementById('status');
        const stepsDiv = document.getElementById('steps');
        const timeDiv = document.getElementById('time');

        function initMaze(testNum) {
            const test = testCases[testNum];
            currentMaze = JSON.parse(JSON.stringify(test.maze));
            const rows = currentMaze.length;
            const cols = currentMaze[0].length;

            mazeDiv.style.gridTemplateColumns = `repeat(${cols}, 25px)`;
            mazeDiv.innerHTML = '';

            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.id = `cell-${i}-${j}`;
                    
                    if (i === test.src[0] && j === test.src[1]) {
                        cell.classList.add('start');
                        cell.textContent = 'S';
                    } else if (i === test.dest[0] && j === test.dest[1]) {
                        cell.classList.add('end');
                        cell.textContent = 'E';
                    } else if (currentMaze[i][j] === 0) {
                        cell.classList.add('wall');
                    } else {
                        cell.classList.add('open');
                    }
                    
                    mazeDiv.appendChild(cell);
                }
            }
        }

        function isSafe(visited, r, c) {
            return r >= 0 && r < currentMaze.length &&
                   c >= 0 && c < currentMaze[0].length &&
                   currentMaze[r][c] === 1 &&
                   !visited[r][c];
        }

        function solveMaze(visited, i, j, destR, destC, path) {
            if (i === destR && j === destC) {
                animationQueue.push({type: 'found', path: [...path]});
                return true;
            }

            visited[i][j] = true;
            path.push([i, j]);
            animationQueue.push({type: 'visit', r: i, c: j});

            const directions = [[1,0], [-1,0], [0,-1], [0,1]];
            
            for (let [dr, dc] of directions) {
                if (isSafe(visited, i+dr, j+dc)) {
                    if (solveMaze(visited, i+dr, j+dc, destR, destC, path)) {
                        return true;
                    }
                }
            }

            animationQueue.push({type: 'backtrack', r: i, c: j});
            path.pop();
            visited[i][j] = false;
            
            return false;
        }

        async function animate() {
            startTime = performance.now();
            for (let i = 0; i < animationQueue.length && isRunning; i++) {
                while (isPaused) {
                    await new Promise(resolve => setTimeout(resolve, 100));
                }

                const action = animationQueue[i];
                const test = testCases[testCaseSelect.value];

                if (action.type === 'visit') {
                    const cell = document.getElementById(`cell-${action.r}-${action.c}`);
                    if (!(action.r === test.src[0] && action.c === test.src[1]) &&
                        !(action.r === test.dest[0] && action.c === test.dest[1])) {
                        cell.className = 'cell visiting';
                    }
                    stepCount++;
                    stepsDiv.textContent = `Steps: ${stepCount}`;
                    const elapsed = ((performance.now() - startTime) / 1000).toFixed(3);
                    timeDiv.textContent = `Time: ${elapsed}s`;
                } else if (action.type === 'backtrack') {
                    const cell = document.getElementById(`cell-${action.r}-${action.c}`);
                    if (!(action.r === test.src[0] && action.c === test.src[1]) &&
                        !(action.r === test.dest[0] && action.c === test.dest[1])) {
                        cell.className = 'cell visited';
                    }
                } else if (action.type === 'found') {
                    statusDiv.textContent = 'Path found!';
                    for (let [r, c] of action.path) {
                        const cell = document.getElementById(`cell-${r}-${c}`);
                        if (!(r === test.src[0] && c === test.src[1]) &&
                            !(r === test.dest[0] && c === test.dest[1])) {
                            cell.className = 'cell path';
                        }
                        await new Promise(resolve => setTimeout(resolve, 20));
                    }
                    const finalTime = ((performance.now() - startTime) / 1000).toFixed(3);
                    timeDiv.textContent = `Time: ${finalTime}s`;
                    startBtn.disabled = false;
                    pauseBtn.disabled = true;
                    return;
                }

                await new Promise(resolve => setTimeout(resolve, animationSpeed));
            }

            if (isRunning) {
                statusDiv.textContent = 'No path found!';
                const finalTime = ((performance.now() - startTime) / 1000).toFixed(3);
                timeDiv.textContent = `Time: ${finalTime}s`;
                startBtn.disabled = false;
                pauseBtn.disabled = true;
            }
        }

        startBtn.addEventListener('click', () => {
            const testNum = parseInt(testCaseSelect.value);
            const test = testCases[testNum];
            
            initMaze(testNum);
            animationQueue = [];
            stepCount = 0;
            stepsDiv.textContent = 'Steps: 0';
            statusDiv.textContent = 'Solving...';

            const rows = currentMaze.length;
            const cols = currentMaze[0].length;
            const visited = Array(rows).fill(null).map(() => Array(cols).fill(false));

            solveMaze(visited, test.src[0], test.src[1], test.dest[0], test.dest[1], []);

            isRunning = true;
            isPaused = false;
            startBtn.disabled = true;
            pauseBtn.disabled = false;
            pauseBtn.textContent = 'Pause';

            animate();
        });

        pauseBtn.addEventListener('click', () => {
            isPaused = !isPaused;
            pauseBtn.textContent = isPaused ? 'Resume' : 'Pause';
        });

        resetBtn.addEventListener('click', () => {
            isRunning = false;
            isPaused = false;
            animationQueue = [];
            stepCount = 0;
            startTime = 0;
            stepsDiv.textContent = '';
            timeDiv.textContent = '';
            statusDiv.textContent = 'Select a test case and click Start';
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            pauseBtn.textContent = 'Pause';
            initMaze(parseInt(testCaseSelect.value));
        });

        speedSelect.addEventListener('change', (e) => {
            animationSpeed = parseInt(e.target.value);
        });

        testCaseSelect.addEventListener('change', () => {
            isRunning = false;
            isPaused = false;
            stepCount = 0;
            startTime = 0;
            stepsDiv.textContent = '';
            timeDiv.textContent = '';
            statusDiv.textContent = 'Select a test case and click Start';
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            initMaze(parseInt(testCaseSelect.value));
        });

        // Initialize with first test case
        initMaze(1);
    </script>
</body>
</html>
